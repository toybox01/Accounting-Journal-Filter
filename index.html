<!DOCTYPE html><html lang="zh-tw"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Don't work hard, work smart</title></head><body><style type="text/css">*{color:#f8f8f2;font-size:18px;font-family:"Microsoft JhengHei";font-weight:bold;line-height:32px;margin:auto;box-sizing:border-box;}body{background:#181915;}div{display:block;}table{width:100%;}a:focus,*:focus{outline:0;}input[type="text"],input[type="number"],textarea,select,button{background:#282923;border:0;border-bottom:3px solid #373734;min-height:46px;padding:0 6px;}input[type="text"]{width:150px;}input[type="number"]{width:50px;text-align:center;}button{padding:0 12px;cursor:pointer;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none;}textarea{width:100%;height:600px;resize:none;}#content{width:100%;min-width:1300px;padding:18px;position:absolute;}#ignore, #error{height:68px;}#error{color:#f92472;display:none;}</style><script type="text/javascript">function $(c){return document.getElementById(c)}function intval(c,b){var d=typeof c;if(d==='boolean'){return+c}else if(d==='string'){var a=parseInt(c,b||10);return(isNaN(a)||!isFinite(a))?0:a}else if(d==='number'&&isFinite(c)){return c|0}else{return 0}}function ignore(c){var b=$('ignore').value.split("\n");for(var d=0;d<b.length;d++)if(b[d].trim()&&c.indexOf(b[d])==0)return true;return false}function filter(){var f=[];var e=[];var i=[];var j=[];var o=[];var t=$('src').value;var p=$('keyword').value;var q=$('mode').value;var u=$('fill').value;var v=intval($('require').value);var g=intval($('num').value);var h=intval($('merge').value);t.split("\n").forEach(function(c){if(!c.trim())return;var b=c.split("\t");var d=0;for(var a=0;a<b.length;a++)if(b[a].trim())d++;if(d<v&&!h||ignore(c)||b[0].trim()&&!b[0].match(/^\d{6,8}$/g)&&!new Date(b[0]).getTime()||!b[0].trim()&&!j.hasOwnProperty(0)){i.push(c);return}for(var a=0;a<2;a++)if(b[a].trim()){j[a]=b[a]}else{b[a]=j[a]}if(p.length&&b[0].indexOf(p)!=0)return;if(h&&d==1&&b[h].trim()){var r=f.pop().split("\t");r[h]+=b[h];f.push(r.join("\t"));return}for(var a=0;a<2;a++)if(o[a]!=b[a]){o[a]=b[a];if(a==1)e.push(f.length)}else if(u=='off'){b[a]=''}f.push(b.join("\t"))});var k=[];if(g>0&&e.length>g){var w=q=='limit'?Math.floor(e.length/g):g;var s=q=='limit'?g:Math.floor(e.length/g);for(var l=0;l<s;l++){var m=w*l;var x=e[m];var y=m<e.length?e[m+1]:e.length+1;for(var n=x;n<y;n++)k.push(f[n])}$('summury').innerHTML=s+' / '+e.length+' 筆'}else{k=f;$('summury').innerHTML=e.length+' 筆'}$('result').value=k.join("\n");$('error').value=i.join("\n");$('error').style.display=i.length?'inline-block':'none'}window.onload=function(){$('merge').addEventListener('change',function(){if(intval(this.value)){$('require').value=0;$('require').readOnly=true}else{$('require').readOnly=false}})}</script><div id="content"><form action="javascript:filter();"><table><tr><td width="49%"><textarea id="src" placeholder="請輸入"></textarea></td><td width="2"><center>>></center></td><td width="49%"><textarea id="result" readonly></textarea></td></tr><tr><td colspan="3"><textarea id="ignore" placeholder="省略項目"></textarea></td></tr><tr><td colspan="3"><textarea id="error" readonly></textarea></td></tr><tr><td colspan="3"><input type="text" id="keyword" placeholder="關鍵字"><span>&nbsp;</span><input type="number" id="require" value="2"><span>&nbsp;</span><input type="number" id="num" value="25"><span>&nbsp;</span><select id="mode"><option value="limit" selected>限量</option><option value="interval">間隔</option></select><span>&nbsp;</span><select id="fill"><option value="off" selected>不填滿</option><option value="on">填滿</option></select><span>&nbsp;</span><select id="merge"><option value="0" selected>摘要合併</option><option value="2">C</option><option value="3">D</option><option value="4">E</option><option value="5">F</option><option value="6">G</option><option value="7">H</option><option value="8">I</option><option value="9">J</option></select><span>&nbsp;</span><button type="submit">篩選</button><span>&nbsp;</span><span id="summury">&nbsp;</span></td></tr></table></form></div></body></html>