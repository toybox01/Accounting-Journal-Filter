<!DOCTYPE html><html lang="zh-tw"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Don't work hard, work smart</title></head><body><style type="text/css">*{color:#f8f8f2;font-size:18px;font-family:"Microsoft JhengHei";font-weight:bold;line-height:32px;margin:auto;box-sizing:border-box;}body{background:#181915;}div{display:block;}table{width:100%;}a:focus,*:focus{outline:0;}input[type="text"],input[type="number"],textarea,select,button{background:#282923;border:0;border-bottom:3px solid #373734;min-height:46px;padding:0 6px;}input[type="text"]{width:150px;}input[type="number"]{width:50px;text-align:center;}button{padding:0 12px;cursor:pointer;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none;}textarea{width:100%;height:600px;resize:none;}#content{width:100%;min-width:1300px;padding:18px;position:absolute;}#ignore, #error{height:68px;}#error{color:#f92472;display:none;}</style><script type="text/javascript">function $(b){return document.getElementById(b)}function intval(b,a){var d=typeof b;if(d==='boolean'){return+b}else if(d==='string'){var c=parseInt(b,a||10);return(isNaN(c)||!isFinite(c))?0:c}else if(d==='number'&&isFinite(b)){return b|0}else{return 0}}function ignore(b){var a=$('ignore').value.split("\n");for(var d=0;d<a.length;d++)if(a[d].trim()&&b.indexOf(a[d])==0)return true;return false}function checkdate(b){return!!(b.match(/^\d{6,8}$/g)||b.match(/^\d{1,4}[\/|-]\d{1,4}[\/|-]\d{1,4}$/g)&&Date.parse(b))}function filter(){var e=[];var f=[];var l=[];var m=[];var k=[];var u=$('src').value;var q=$('keyword').value;var n=$('mode').value;var v=$('fill').value;var w=intval($('require').value);var g=intval($('num').value);var j=intval($('merge').value);u.split("\n").forEach(function(b){if(!b.trim())return;var a=b.split("\t");var d=0;for(var c=0;c<a.length;c++)if(a[c].trim())d++;if(d<w&&!j||ignore(b)||a[0].trim()&&!checkdate(a[0])||!a[0].trim()&&!m.hasOwnProperty(0)){l.push(b);return}for(var c=0;c<2;c++)if(a[c].trim()){m[c]=a[c]}else{a[c]=m[c]}if(q.length&&a[0].indexOf(q)!=0)return;if(j&&d==1&&a[j].trim()){var r=e.pop();r[j]+=a[j];e.push(r);return}if(k[2]!=a[1]){k[2]=a[1];f.push(e.length)}e.push(a)});if(g<=0||f.length<=g){n='interval';g=1}var s=[];var x=n=='limit'?Math.floor(f.length/g):g;var t=n=='limit'?g:Math.floor(f.length/g);for(var o=0;o<t;o++){var p=x*o;var y=f[p];var z=p<f.length-1?f[p+1]:e.length;for(var i=y;i<z;i++){for(var h=0;h<2;h++)if(k[h]!=e[i][h]){k[h]=e[i][h]}else if(v=='off'){e[i][h]=''}s.push(e[i].join("\t"))}}$('summury').innerHTML=t+' / '+f.length+' 筆';$('result').value=s.join("\n");$('error').value=l.join("\n");$('error').style.display=l.length?'inline-block':'none'}window.onload=function(){$('merge').addEventListener('change',function(){if(intval(this.value)){$('require').value=0;$('require').readOnly=true}else{$('require').readOnly=false}})}</script><div id="content"><form action="javascript:filter();"><table><tr><td width="49%"><textarea id="src" placeholder="請輸入"></textarea></td><td width="2"><center>>></center></td><td width="49%"><textarea id="result" readonly></textarea></td></tr><tr><td colspan="3"><textarea id="ignore" placeholder="省略項目"></textarea></td></tr><tr><td colspan="3"><textarea id="error" readonly></textarea></td></tr><tr><td colspan="3"><input type="text" id="keyword" placeholder="關鍵字"><span>&nbsp;</span><input type="number" id="require" value="2"><span>&nbsp;</span><input type="number" id="num" value="25"><span>&nbsp;</span><select id="mode"><option value="limit" selected>限量</option><option value="interval">間隔</option></select><span>&nbsp;</span><select id="fill"><option value="off" selected>不填滿</option><option value="on">填滿</option></select><span>&nbsp;</span><select id="merge"><option value="0" selected>摘要合併</option><option value="2">C</option><option value="3">D</option><option value="4">E</option><option value="5">F</option><option value="6">G</option><option value="7">H</option><option value="8">I</option><option value="9">J</option></select><span>&nbsp;</span><button type="submit">篩選</button><span>&nbsp;</span><span id="summury">&nbsp;</span></td></tr></table></form></div></body></html>